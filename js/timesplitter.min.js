/**
* TimeSplitter jQuery plugin - makes time inputs more friendly in a simple way, with hours, minutes, and am/pm inputs replacing a single text input.
* Author: Colby Palmer
* Email: colby [at] colbypalmer dot com
* URL: http://www.github.com/colbypalmer/timesplitter
* Version: 0.0.1a
* Licensed under the FreeBSD License: http://www.opensource.org/licenses/bsd-license.php
*
* Example usage:
* $(selector).timesplitter();
**/
function timeupdate(a){var a=$(a);var b=a.parent();b.children(".timesplitter_hour, .timesplitter_minute").removeClass("timesplitter_error");var c=b.children(".timesplitter_hour").val();var d=b.children(".timesplitter_minute").val();var e=b.children(".timesplitter_ampm").val();err=0;if(isNaN(c)||c>12||String(c).length<1){b.children(".timesplitter_hour").addClass("timesplitter_error");err=1}if(isNaN(d)||d>59||String(d).length<2){b.children(".timesplitter_minute").addClass("timesplitter_error");return false;err=1}if(c==12&&e==0){c=0}else if(c==12&&e==1){c=12}else{c=parseInt(c,10);c=e=="1"?c+12:c}if(err)return false;newtime=c+":"+d;oldval=a.parent().prev().val();a.parent().prev().val(newtime)}(function(a){a.fn.timesplitter=function(){a(".timesplitter_hour, .timesplitter_minute").live("keyup",function(b){b=a(this);timeupdate(b)});a(".timesplitter_ampm").live("change",function(b){b=a(this);timeupdate(b)});return this.each(function(){var b=a(this);b.wrap('<span class="timesplitter_wrap" />');var c=b.val();if(b.attr("required")){var d=' required="required"'}else{var d=""}var e=c.split(":");var f=e[0];var g=e[1];var h=f-12;if(h<0){hour_display=f;var i=' selected="selected"';var j=""}else if(h==0){hour_display=f;var i="";var j=' selected="selected"'}else{hour_display=h;var i="";var j=' selected="selected"'}if(c==""){f="";g="";h=0}b.hide().after('<div class="timesplitter_wrap"><input type="text" name="timesplitter_hour" class="timesplitter_hour" value="'+hour_display+'" maxlength="2"'+d+' />:<input type="text" name="timesplitter_minute" class="timesplitter_minute" value="'+g+'" maxlength="2"'+d+' /><select name="timesplitter_ampm" class="timesplitter_ampm"><option value="0"'+i+'>AM</option><option value="1"'+j+">PM</option></select></div>")})}})(jQuery)